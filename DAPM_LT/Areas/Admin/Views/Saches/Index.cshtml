@model IEnumerable<DAPM_LT.Models.Sach>

@{
    ViewBag.Title = "Index";
    Layout = "~/Areas/Admin/Views/Shared/_LayoutAd.cshtml";
}

<h2>Quản Lý Sách</h2>

<a href="@Url.Action("Create")" class="btn btn-success pull-right" style="color: white;">
    Tạo mới
</a>
<br />
<table class="table fa-border" style="text-align:center">
    <tr>
        <th>
            Hình Ảnh
        </th>
        <th>
            Mã Sách
        </th>
        <th>
            Tên Sách
        </th>

        <th>
            Tác Giả
        </th>
        <th>
            Năm Xuất Bản
        </th>
        <th>
            Thể Loại
        </th>
        <th></th>
    </tr>

    @foreach (var item in Model)
    {
        <tr class="table-row" data-id="@item.Idsach">
            <td>

                <img src="~/Content/@item.ImgSach" style="height:100px; width:auto" />
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Idsach)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Tieude)
            </td>

            <td>
                @Html.DisplayFor(modelItem => item.Tacgia)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Namxuatban)
            </td>

            <td>
                @Html.DisplayFor(modelItem => item.Loai.Tenloai)
            </td>
            <td>
                <button class="btn btn-success ">
                    @Html.ActionLink("Sửa", "Edit", new { id = item.Idsach }, new { @style = "color:white;" })
                </button>
                <button class="btn btn-primary ">
                    @Html.ActionLink("Chi tiết", "Details", new { id = item.Idsach }, new { @style = "color:white;" })
                </button>
                <button class="btn btn-danger">
                    @Html.ActionLink("Xóa", "Delete", new { id = item.Idsach }, new { @style = "color:white;" })
                </button>
            </td>
        </tr>
    }

</table>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        // Chọn tất cả các hàng có class "table-row"
        var rows = document.querySelectorAll('.table-row');

        // Thêm sự kiện click cho mỗi hàng
        rows.forEach(function (row) {
            row.addEventListener('click', function () {
                // Lấy giá trị id từ thuộc tính data-id
                var id = row.getAttribute('data-id');

                // Xây dựng URL chuyển hướng
                var redirectUrl = '@Url.Action("Index", "Kiemsoats/Index")' + '/' + id;

                // Gửi yêu cầu chuyển hướng
                window.location.href = redirectUrl;
            });
        });
    });
</script>



